<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Test - 3D Iron Golem</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #000;
            font-family: 'Courier New', monospace;
            overflow: hidden;
            color: white;
        }
        
        #gameContainer {
            position: relative;
            width: 100vw;
            height: 100vh;
        }
        
        #gameCanvas {
            display: block;
            cursor: crosshair;
        }
        
        #debugInfo {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 5px;
            z-index: 1000;
            max-width: 300px;
            font-size: 12px;
        }
        
        #loadingScreen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        #loadingBar {
            width: 300px;
            height: 20px;
            border: 2px solid #fff;
            margin-top: 20px;
        }
        
        #loadingProgress {
            height: 100%;
            background: #4CAF50;
            width: 0%;
            transition: width 0.3s;
        }
        
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>
        
        <div id="debugInfo">
            <h4>üîß Debug Info</h4>
            <div id="gameStatus">Loading...</div>
            <div id="errorLog"></div>
        </div>
        
        <div id="loadingScreen">
            <h1>ü§ñ Iron Golem Debug Test</h1>
            <p>Loading game systems...</p>
            <div id="loadingBar">
                <div id="loadingProgress"></div>
            </div>
        </div>
    </div>

    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <!-- Game Scripts -->
    <script src="src/core/AudioManager.js"></script>
    <script src="src/core/AssetLoader.js"></script>
    <script src="src/core/InputManager.js"></script>
    <script src="src/entities/Entity.js"></script>
    <script src="src/entities/IronGolem.js"></script>
    <script src="src/entities/Enemy.js"></script>
    <script src="src/entities/Resource.js"></script>
    <script src="src/systems/PhysicsSystem.js"></script>
    <script src="src/systems/CombatSystem.js"></script>
    <script src="src/systems/WaveSystem.js"></script>
    <script src="src/systems/ResourceSystem.js"></script>
    <script src="src/world/WorldGenerator.js"></script>
    <script src="src/ui/HUD.js"></script>
    <script src="src/ui/MenuSystem.js"></script>
    <script src="src/utils/MathUtils.js"></script>
    <script src="src/utils/GeometryUtils.js"></script>
    <script src="src/utils/StorageManager.js"></script>
    <script src="src/core/GameEngine.js"></script>
    <script src="src/main.js"></script>

    <script>
        // Debug logging
        const originalConsoleError = console.error;
        const originalConsoleWarn = console.warn;
        
        console.error = function(...args) {
            originalConsoleError.apply(console, args);
            updateErrorLog('ERROR: ' + args.join(' '));
        };
        
        console.warn = function(...args) {
            originalConsoleWarn.apply(console, args);
            updateErrorLog('WARN: ' + args.join(' '));
        };
        
        function updateErrorLog(message) {
            const errorLog = document.getElementById('errorLog');
            if (errorLog) {
                errorLog.innerHTML += '<div style="color: #ff6b6b; margin: 2px 0;">' + message + '</div>';
                errorLog.scrollTop = errorLog.scrollHeight;
            }
        }
        
        function updateGameStatus() {
            const statusDiv = document.getElementById('gameStatus');
            if (!statusDiv) return;
            
            let status = '';
            
            if (window.game) {
                status += '‚úÖ Game instance created<br>';
                
                if (window.game.gameEngine) {
                    status += '‚úÖ Game engine initialized<br>';
                    
                    if (window.game.gameEngine.ironGolem) {
                        status += '‚úÖ Iron Golem created<br>';
                        status += `Position: ${window.game.gameEngine.ironGolem.position.x.toFixed(1)}, ${window.game.gameEngine.ironGolem.position.z.toFixed(1)}<br>`;
                        status += `Health: ${window.game.gameEngine.ironGolem.currentHealth}/${window.game.gameEngine.ironGolem.maxHealth}<br>`;
                    }
                    
                    if (window.game.gameEngine.audioManager) {
                        status += '‚úÖ Audio system active<br>';
                        status += `Sound effects: ${window.game.gameEngine.audioManager.soundBuffers?.size || 0}<br>`;
                    }
                    
                    if (window.game.gameEngine.enemies) {
                        status += `Enemies: ${window.game.gameEngine.enemies.size}<br>`;
                    }
                    
                    if (window.game.gameEngine.waveSystem) {
                        status += `Wave: ${window.game.gameEngine.waveSystem.currentWave}<br>`;
                    }
                } else {
                    status += '‚ùå Game engine not initialized<br>';
                }
            } else {
                status += '‚ùå Game instance not found<br>';
            }
            
            statusDiv.innerHTML = status;
        }
        
        // Update status every second
        setInterval(updateGameStatus, 1000);
        
        // Initial status update
        setTimeout(updateGameStatus, 500);
        
        console.log('üîß Debug test page loaded');
    </script>
</body>
</html> 